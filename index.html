<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PolyClone - åˆ›å§‹äººå·¥ä¸šçº§å®‰å…¨ç‰ˆ</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
.admin-border { border: 2px solid #a855f7; }
.market-card { transition: all 0.3s; }
.market-card:hover { transform: translateY(-5px); border-color: #3b82f6; }
.gradient-bg { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); }
.hidden { display: none; }
</style>
</head>
<body class="bg-gray-950 text-gray-100 min-h-screen gradient-bg font-sans">

<nav class="border-b border-gray-800 p-4 flex justify-between items-center bg-gray-900/50 backdrop-blur-md sticky top-0 z-50">
<div class="flex items-center gap-2">
<div class="w-8 h-8 bg-blue-600 rounded-lg rotate-45"></div>
<span class="text-xl font-bold tracking-tight ml-2 italic text-blue-500">POLYCLONE</span>
</div>
<div class="flex items-center gap-4">
<span id="userNameDisplay" class="text-sm text-gray-400"></span>
<button id="authBtn" onclick="openAuth()" class="bg-blue-600 hover:bg-blue-700 px-5 py-2 rounded-xl font-bold text-sm transition">
ç™»å½• / æ³¨å†Œ
</button>
</div>
</nav>

<main class="max-w-4xl mx-auto p-6">

<div id="authModal" class="hidden fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-sm p-6">
<div class="bg-gray-900 w-full max-w-sm p-8 rounded-3xl border border-gray-800">
<h2 class="text-2xl font-bold mb-6 text-center text-white italic">èº«ä»½éªŒè¯</h2>
<div class="space-y-4">
    <div>
        <label class="text-[10px] text-gray-500 uppercase font-bold ml-1">ç”¨æˆ·å (å”¯ä¸€)</label>
        <input id="uInput" type="text" class="w-full bg-black border border-gray-700 p-4 rounded-2xl outline-none focus:border-blue-500" placeholder="è®¾ç½®ç”¨æˆ·å">
    </div>
    <div>
        <label class="text-[10px] text-gray-500 uppercase font-bold ml-1">å¼ºå¯†ç  (8-16ä½ å¤§å°å†™+ç‰¹æ®Šå­—ç¬¦)</label>
        <input id="pInput" type="password" class="w-full bg-black border border-gray-700 p-4 rounded-2xl outline-none focus:border-blue-500 text-blue-400" placeholder="è®¾ç½®å¼ºå¯†ç ">
    </div>
    <button onclick="handleAuth()" class="w-full bg-blue-600 hover:bg-blue-700 py-4 rounded-2xl font-bold mt-4 shadow-lg shadow-blue-500/20">ç¡®è®¤è¿›å…¥</button>
    <button onclick="closeAuth()" class="w-full text-gray-500 text-sm mt-2">è¿”å›</button>
</div>
<div class="mt-6 p-3 bg-blue-900/20 rounded-xl">
    <p class="text-[10px] text-blue-300 leading-relaxed">æç¤ºï¼šé¦–æ¬¡è¾“å…¥å³ä¸ºæ³¨å†Œï¼Œå†æ¬¡è¾“å…¥å³ä¸ºç™»å½•ã€‚å¯†ç å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯åŠç‰¹æ®Šç¬¦å·ã€‚</p>
</div>
</div>
</div>

<section id="adminPanel" class="hidden mb-10 p-6 bg-gray-900 rounded-2xl admin-border">
<div class="flex justify-between items-center mb-6">
<h2 class="text-xl font-bold text-purple-400">ğŸ›¡ï¸ åˆ›å§‹äººç®¡ç†åå°</h2>
<span class="text-[10px] text-purple-300 bg-purple-900/40 px-3 py-1 rounded-full italic">Auth: admin1991 Verified</span>
</div>
<div class="space-y-3">
<input type="text" id="marketInput" placeholder="è¾“å…¥æ–°çš„é¢„æµ‹è¯é¢˜..." class="w-full bg-black/40 border border-gray-700 rounded-xl p-4 focus:border-purple-500 outline-none">
<button onclick="addMarket()" class="w-full bg-purple-600 hover:bg-purple-700 py-3 rounded-xl font-bold transition">ç«‹å³å‘å¸ƒ</button>
</div>
</section>

<div id="marketList" class="grid grid-cols-1 gap-6 mt-10"></div>
</main>

<script>
let markets = [
    { id: 1, question: "2026å¹´äººç±»ä¼šç™»ä¸Šç«æ˜Ÿå—ï¼Ÿ", yesPrice: 0.15, noPrice: 0.85 },
    { id: 2, question: "æ¯”ç‰¹å¸ä¼šåœ¨2026å¹´å†…è§¦åŠ $150,000 å—ï¼Ÿ", yesPrice: 0.62, noPrice: 0.38 }
];

function openAuth() { document.getElementById('authModal').classList.remove('hidden'); }
function closeAuth() { document.getElementById('authModal').classList.add('hidden'); }

// æ ¸å¿ƒé€»è¾‘ï¼šå¼ºå¯†ç æ­£åˆ™æ ¡éªŒ
function validatePassword(pw) {
    const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*?])[A-Za-z\d!@#$%^&*?]{8,16}$/;
    return regex.test(pw);
}

function handleAuth() {
    const name = document.getElementById('uInput').value.trim();
    const pass = document.getElementById('pInput').value.trim();
    
    if(!name || !pass) return alert("è´¦å·å¯†ç ä¸èƒ½ä¸ºç©º");

    const storedPass = localStorage.getItem(`pc_pwd_${name}`);

    if (storedPass) {
        // ç™»å½•é€»è¾‘
        if (storedPass === pass) {
            localStorage.setItem('pc_current_user', name);
            alert("ç™»å½•æˆåŠŸï¼Œæ¬¢è¿å›æ¥ï¼");
            location.reload();
        } else {
            alert("è¯¥è´¦å·å·²è¢«æ³¨å†Œï¼Œå¯†ç é”™è¯¯ï¼");
        }
    } else {
        // æ³¨å†Œé€»è¾‘ï¼šå…ˆæ£€æŸ¥å¯†ç å¼ºåº¦
        if (!validatePassword(pass)) {
            return alert("å¯†ç ä¸åˆè§„ï¼\nè¦æ±‚ï¼š8-16ä½ï¼Œå¿…é¡»åŒ…å«å¤§å†™ã€å°å†™ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦ã€‚");
        }
        localStorage.setItem(`pc_pwd_${name}`, pass);
        localStorage.setItem('pc_current_user', name);
        alert("æ­å–œï¼å¼ºå¯†ç è´¦æˆ·æ³¨å†ŒæˆåŠŸã€‚");
        location.reload();
    }
}

function renderMarkets() {
    const currentUser = localStorage.getItem('pc_current_user');
    if(currentUser) {
        document.getElementById('userNameDisplay').innerText = `ä½ å¥½, ${currentUser}`;
        document.getElementById('authBtn').innerText = "é€€å‡º";
        document.getElementById('authBtn').onclick = () => { localStorage.removeItem('pc_current_user'); location.reload(); };
        if(currentUser === "admin1991") document.getElementById('adminPanel').classList.remove('hidden');
    }
    
    const list = document.getElementById('marketList');
    list.innerHTML = markets.map(m => `
        <div class="market-card bg-gray-900 border border-gray-800 p-6 rounded-2xl flex flex-col md:flex-row md:items-center justify-between gap-4">
            <h3 class="text-lg font-semibold flex-1 text-gray-200">${m.question}</h3>
            <div class="flex gap-3">
                <button onclick="bet('Yes')" class="bg-green-500/10 border border-green-500/30 w-24 py-2 rounded-xl text-green-400 font-bold italic text-sm">YES $${m.yesPrice}</button>
                <button onclick="bet('No')" class="bg-red-500/10 border border-red-500/30 w-24 py-2 rounded-xl text-red-400 font-bold italic text-sm">NO $${m.noPrice}</button>
            </div>
        </div>
    `).join('');
}

function addMarket() {
    const input = document.getElementById('marketInput');
    if (!input.value) return;
    markets.unshift({ id: Date.now(), question: input.value, yesPrice: 0.5, noPrice: 0.5 });
    input.value = '';
    renderMarkets();
}

function bet(side) {
    const user = localStorage.getItem('pc_current_user');
    if(!user) return openAuth();
    alert(`[ç¡®è®¤äº¤æ˜“] è´¦æˆ·ï¼š${user}\nä¹°å…¥æ–¹å‘ï¼š${side}`);
}

window.onload = renderMarkets;
</script>
</body>
</html>
